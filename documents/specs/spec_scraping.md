# Webスクレイピング仕様書

## 概要

BUYMAの商品一覧をスクレイピングしてCSV出力するツール。
Claude Codeで環境構築からデバッグまで自動化するデモ用プロジェクト。

---

## 対象サイト

- **URL**: https://www.buyma.com/r/-C3260/
- **カテゴリ**: メンズファッション商品一覧

---

## 技術スタック

| 項目 | 技術 | 理由 |
|------|------|------|
| ランタイム | Node.js | |
| スクレイピング | Puppeteer | BUYMAはJavaScriptで商品を動的に読み込むため |
| 言語 | TypeScript | |

### 技術選定の背景

| 方法 | 特徴 | 適用 |
|------|------|------|
| fetch + cheerio | 静的HTML向け、軽量 | × |
| Puppeteer | JS実行が必要なサイト向け | ○ |

---

## 取得データ項目

| 項目 | 説明 |
|------|------|
| 商品名 | 商品のタイトル |
| ブランド | ブランド名 |
| 価格 | 販売価格 |
| URL | 商品詳細ページへのリンク |
| 画像URL | 商品サムネイル画像 |

---

## 出力形式

### ファイル形式
- CSV形式
- ファイル名: `buyma_products_YYYY-MM-DD.csv`

### 出力例

```csv
商品名,ブランド,価格,URL,画像URL
"★SATUR★Waffle Henry Neck T-shirt","SATUR","¥8,900","https://..."
"【Thug Club】Basic Sleeve◆ 長袖","Thug Club","¥15,980","https://..."
"【STUSSY】Basic Thermal","STUSSY","¥18,900","https://..."
```

---

## ディレクトリ構成

```
scripts/
├── package.json
├── scrape-buyma.ts
└── buyma_products_YYYY-MM-DD.csv  # 出力ファイル
```

---

## 実行方法

```bash
npm run scrape
```

### 実行時の出力例

```
🕷️ BUYMAスクレイピング開始...
🌐 ブラウザを起動中...
🔍 80件の商品リンクを検出
📦 各商品の詳細を取得中...
⏳ 30/30件処理中...

✅ 30件の商品を取得しました
📁 CSVファイルを出力しました: buyma_products_2025-12-04.csv
```

---

## 注意事項（スクレイピングのルール）

- **robots.txt** を確認する
- **利用規約** を確認する
- **レート制限** を守る（連続アクセスしすぎない）
- **商用利用** は特に注意

---

## 活用例

| 用途 | 説明 |
|------|------|
| 価格調査 | 競合商品の価格をCSVで管理 |
| 在庫監視 | 定期実行で在庫変動を追跡 |
| データ分析 | 市場トレンドの把握 |

---

## 拡張機能（将来的な対応）

- ページネーション対応
- 価格でソート
- Excel出力対応

---

## 関連ドキュメント

- [[10_demo_scraping|デモスライド: Webスクレイピング]]
